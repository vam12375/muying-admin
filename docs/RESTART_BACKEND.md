# 重启后端服务指南

## 问题

代码已修改并编译成功，但需要重启后端服务才能生效。

## 重启步骤

### 方法1：在IDE中重启（推荐）

如果您使用的是 IntelliJ IDEA 或 Eclipse：

1. 找到正在运行的 Spring Boot 应用
2. 点击"停止"按钮（红色方块图标）
3. 等待服务完全停止
4. 点击"运行"按钮（绿色三角图标）重新启动

### 方法2：命令行重启

#### Windows (PowerShell)

```powershell
# 1. 找到Java进程
Get-Process | Where-Object {$_.ProcessName -like "*java*"}

# 2. 停止进程（替换 <PID> 为实际进程ID）
Stop-Process -Id <PID> -Force

# 3. 重新启动
cd muying-mall
mvn spring-boot:run
```

#### 快速重启脚本

```powershell
# 停止所有Java进程（谨慎使用）
Get-Process java | Stop-Process -Force

# 启动服务
cd muying-mall
mvn spring-boot:run
```

### 方法3：使用Maven插件

```bash
cd muying-mall
mvn spring-boot:stop
mvn spring-boot:run
```

## 验证服务已重启

### 1. 查看日志输出

重启后，应该能看到类似的启动日志：
```
Started MuyingMallApplication in X.XXX seconds
```

### 2. 检查统计接口

访问统计接口后，应该能看到新的日志：
```
INFO  - 优惠券统计 - 总数: 10, 活跃中: 10
```

如果活跃数量仍为0，会看到详细的调试信息：
```
WARN  - 活跃优惠券数量为0，当前所有优惠券状态:
WARN  - ID: 1, 名称: 新用户优惠券, 状态: ACTIVE, 结束时间: 2027-09-18T00:00:00
```

### 3. 刷新前端页面

重启后端后，刷新前端优惠券列表页面，"活跃中"应该显示正确的数量。

## 预期结果

根据数据库数据，所有10个优惠券的状态都是 `ACTIVE`，且结束时间都在未来：

| ID | 名称 | 状态 | 结束时间 |
|----|------|------|----------|
| 1 | 新用户优惠券 | ACTIVE | 2027-09-18 |
| 2 | 满100减15 | ACTIVE | 2027-05-15 |
| 3 | 满200减30 | ACTIVE | 2025-05-23 |
| 4 | 满300减50 | ACTIVE | 2025-05-23 |
| 5 | 全场9折 | ACTIVE | 2025-05-08 |
| 6 | 母婴用品85折 | ACTIVE | 2025-05-13 |
| 7 | 奶粉尿裤满减 | ACTIVE | 2025-05-18 |
| 8 | 玩具图书8折 | ACTIVE | 2025-05-08 |
| 9 | 婴儿洗护满减 | ACTIVE | 2025-05-13 |
| 10 | 孕妇专享9折 | ACTIVE | 2028-05-31 |

**注意**：当前时间是 2025-11-13，所以ID为3、4、5、6、7、8、9的优惠券实际上已经过期了（结束时间在2025年5月）。

修复后，"活跃中"应该显示 **3** 个（ID: 1, 2, 10）。

## 如果问题仍然存在

1. 确认代码修改已保存
2. 确认Maven编译成功
3. 确认后端服务已完全重启
4. 查看后端控制台的完整日志
5. 检查是否有编译错误或运行时异常

---

**创建时间**: 2024-11-13
