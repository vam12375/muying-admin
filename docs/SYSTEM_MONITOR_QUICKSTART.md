# 系统监控快速启动指南

## 🚀 快速开始

### 1. 启动后端服务

```bash
cd muying-mall
mvn spring-boot:run
```

确保后端服务运行在 `http://localhost:8080`

### 2. 启动前端服务

```bash
cd muying-admin

# 如果遇到TypeScript缓存问题，先清理
rm -rf .next

# 启动开发服务器
npm run dev
```

### 3. 访问监控页面

打开浏览器访问：
- 登录页面：`http://localhost:3000/login`
- 监控页面：`http://localhost:3000/settings/monitor`

或通过侧边栏导航：
1. 点击"系统配置"菜单
2. 选择"系统监控"子菜单

---

## 📊 监控指标说明

### 系统健康状态
- **数据库**: 数据库连接状态
- **Redis**: Redis连接状态
- **磁盘空间**: 磁盘使用情况
- **内存**: 系统内存使用情况

### 服务器性能
- **CPU使用率**: 当前CPU使用百分比
- **内存使用率**: 物理内存使用百分比
- **磁盘使用率**: 磁盘空间使用百分比
- **JVM内存**: Java虚拟机内存使用率

### 数据库监控
- **连接池使用率**: 活跃连接数/最大连接数
- **总查询数**: 累计执行的SQL查询数
- **慢查询数**: 执行时间超过阈值的查询数
- **平均查询时间**: SQL查询的平均执行时间

### Redis监控
- **缓存命中率**: 命中次数/(命中次数+未命中次数)
- **已用内存**: Redis占用的内存大小
- **连接客户端数**: 当前连接的客户端数量
- **总键数**: Redis中存储的键总数

### API统计
- **总请求数**: API接收的总请求数
- **成功请求数**: 返回2xx状态码的请求数
- **失败请求数**: 返回4xx/5xx状态码的请求数
- **平均响应时间**: API响应的平均时间

---

## 🎯 使用技巧

### 自动刷新
- 默认每30秒自动刷新一次
- 点击"自动刷新"按钮可暂停/恢复
- 离开页面时自动停止刷新

### 手动刷新
- 点击右上角"刷新"按钮立即更新数据
- 刷新时会显示加载动画

### 查看详细信息
- 鼠标悬停在卡片上查看更多信息
- 进度环颜色表示状态：
  - 🟢 绿色 (0-60%): 正常
  - 🔵 蓝色 (60-80%): 良好
  - 🟠 橙色 (80-90%): 警告
  - 🔴 红色 (90-100%): 危险

---

## ⚠️ 常见问题

### Q1: 页面显示"加载监控数据失败"

**原因**: 后端服务未启动或认证失败

**解决**:
1. 确认后端服务正常运行
2. 检查是否已登录
3. 查看浏览器控制台错误信息

### Q2: 数据显示为0或异常

**原因**: 后端监控组件获取数据失败

**解决**:
1. 检查后端日志
2. 确认数据库和Redis连接正常
3. 验证后端监控权限配置

### Q3: TypeScript报错找不到模块

**原因**: TypeScript语言服务器缓存问题

**解决**:
```bash
# 清理缓存并重启
rm -rf .next
npm run dev
```

### Q4: 自动刷新不工作

**原因**: 定时器被清理或组件卸载

**解决**:
1. 检查自动刷新开关状态
2. 重新进入监控页面
3. 手动点击刷新按钮

---

## 🔧 配置说明

### 修改刷新间隔

编辑 `src/views/monitor/SystemMonitorView.tsx`:

```typescript
// 默认30秒，可修改为其他值（单位：毫秒）
const interval = setInterval(() => {
  loadMetrics();
}, 30000); // 改为 60000 表示60秒
```

### 修改进度环颜色规则

编辑 `src/components/monitor/ProgressRing.tsx`:

```typescript
const getColor = () => {
  if (color) return color;
  if (progress >= 90) return '#ef4444'; // 红色阈值
  if (progress >= 80) return '#f59e0b'; // 橙色阈值
  if (progress >= 60) return '#3b82f6'; // 蓝色阈值
  return '#10b981'; // 绿色
};
```

---

## 📝 后续优化建议

### 短期优化
- [ ] 添加历史数据图表
- [ ] 支持导出监控报告
- [ ] 添加告警阈值配置

### 中期优化
- [ ] WebSocket实时推送
- [ ] 自定义监控面板
- [ ] 多服务器监控

### 长期优化
- [ ] 分布式追踪
- [ ] 智能告警
- [ ] 性能分析工具

---

## 📚 相关文档

- [完整实现文档](./SYSTEM_MONITOR_IMPLEMENTATION.md)
- [后端API文档](../../muying-mall/README.md)
- [项目主文档](../README.md)

---

**祝您使用愉快！** 🎉

如有问题，请查看完整实现文档或联系开发团队。
