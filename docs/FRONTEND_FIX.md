# ğŸ”§ å‰ç«¯ä¿®å¤è¯´æ˜

## ä¿®å¤å†…å®¹

å·²ä¿®å¤è®¢å•ç®¡ç†å’Œå•†å“ç®¡ç†é¡µé¢çš„æ•°æ®åŠ è½½é—®é¢˜ã€‚

### ä¿®æ”¹æ–‡ä»¶

1. **src/views/orders/OrdersView.tsx**
   - æ·»åŠ è¯¦ç»†çš„å“åº”æ—¥å¿—
   - ä¿®å¤æ•°æ®æ ¼å¼å¤„ç†ï¼ˆæ”¯æŒ `list` å’Œ `records` ä¸¤ç§æ ¼å¼ï¼‰
   - ä¿®å¤ç»Ÿè®¡æ•°æ®çš„å­—æ®µæ˜ å°„ï¼ˆæ”¯æŒä¸‹åˆ’çº¿å’Œé©¼å³°å‘½åï¼‰
   - å¤±è´¥æ—¶è®¾ç½®ç©ºæ•°ç»„ï¼Œé¿å…æ˜¾ç¤ºæ—§æ•°æ®

2. **src/views/products/ProductsView.tsx**
   - æ·»åŠ è¯¦ç»†çš„å“åº”æ—¥å¿—
   - ä¿®å¤æ•°æ®æ ¼å¼å¤„ç†
   - å¤±è´¥æ—¶è®¾ç½®ç©ºæ•°ç»„

3. **src/lib/api.ts**
   - æ·»åŠ è¯·æ±‚æ—¥å¿—ï¼Œæ–¹ä¾¿è°ƒè¯•

### å…³é”®ä¿®å¤ç‚¹

#### 1. æ•°æ®æ ¼å¼å…¼å®¹

åç«¯å¯èƒ½è¿”å›ä¸¤ç§æ ¼å¼ï¼š
```typescript
// æ ¼å¼ 1
{
  success: true,
  data: {
    list: [...],
    total: 100
  }
}

// æ ¼å¼ 2
{
  success: true,
  data: {
    records: [...],
    total: 100
  }
}
```

ä¿®å¤åçš„ä»£ç åŒæ—¶æ”¯æŒä¸¤ç§æ ¼å¼ï¼š
```typescript
const orderList = data.list || data.records || [];
```

#### 2. ç»Ÿè®¡æ•°æ®å­—æ®µæ˜ å°„

åç«¯è¿”å›çš„å­—æ®µå¯èƒ½æ˜¯ä¸‹åˆ’çº¿å‘½åï¼š
```typescript
{
  pending_payment: 10,
  pending_shipment: 20,
  shipped: 30,
  completed: 40
}
```

ä¿®å¤ååŒæ—¶æ”¯æŒä¸‹åˆ’çº¿å’Œé©¼å³°å‘½åï¼š
```typescript
setStats({
  pendingPayment: data.pending_payment || data.pendingPayment || 0,
  pendingShipment: data.pending_shipment || data.pendingShipment || 0,
  shipped: data.shipped || 0,
  completed: data.completed || 0
});
```

#### 3. è°ƒè¯•æ—¥å¿—

æ·»åŠ äº†è¯¦ç»†çš„æ—¥å¿—è¾“å‡ºï¼Œæ–¹ä¾¿æ’æŸ¥é—®é¢˜ï¼š
```typescript
console.log('[API Request]', { endpoint, fullUrl, method, hasToken });
console.log('[Orders] API Response:', response);
console.log('[Orders] Order list:', orderList);
```

### ä½¿ç”¨æ–¹æ³•

1. **é‡å¯å¼€å‘æœåŠ¡å™¨**ï¼ˆå¦‚æœè¿˜æ²¡é‡å¯ï¼‰
   ```bash
   # åœæ­¢æœåŠ¡å™¨ (Ctrl+C)
   npm run dev
   ```

2. **æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·** (F12)
   - åˆ‡æ¢åˆ° Console æ ‡ç­¾
   - æŸ¥çœ‹æ—¥å¿—è¾“å‡º

3. **è®¿é—®è®¢å•ç®¡ç†é¡µé¢**
   - åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„æ—¥å¿—ï¼š
   ```
   [API Request] { endpoint: '/api/admin/orders?...', fullUrl: '...', ... }
   [Orders] API Response: { success: true, data: { list: [...], total: 10 } }
   [Orders] Order list: [...]
   ```

4. **æ£€æŸ¥æ•°æ®**
   - å¦‚æœçœ‹åˆ° `Order list: []`ï¼Œè¯´æ˜åç«¯è¿”å›äº†ç©ºæ•°æ®
   - å¦‚æœçœ‹åˆ° `Order list: [...]`ï¼Œè¯´æ˜æ•°æ®æ­£å¸¸
   - å¦‚æœçœ‹åˆ°é”™è¯¯ä¿¡æ¯ï¼Œæ ¹æ®é”™è¯¯å†…å®¹æ’æŸ¥

### å¸¸è§é—®é¢˜

#### é—®é¢˜ 1: ä»ç„¶æ˜¾ç¤º"ç³»ç»Ÿç¹å¿™"

**å¯èƒ½åŸå› **:
- åç«¯æœåŠ¡æœªå¯åŠ¨
- åç«¯æ•°æ®åº“è¿æ¥å¤±è´¥
- åç«¯æ–¹æ³•æœªå®ç°

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥åç«¯æ§åˆ¶å°æ—¥å¿—
2. ç¡®è®¤åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ
3. æŸ¥çœ‹æµè§ˆå™¨ Console çš„è¯¦ç»†æ—¥å¿—

#### é—®é¢˜ 2: æ˜¾ç¤º"æš‚æ— æ•°æ®"

**å¯èƒ½åŸå› **:
- æ•°æ®åº“ä¸­ç¡®å®æ²¡æœ‰æ•°æ®
- åç«¯è¿”å›ç©ºæ•°ç»„

**è§£å†³æ–¹æ¡ˆ**:
1. æŸ¥çœ‹æµè§ˆå™¨ Console æ—¥å¿—
2. å¦‚æœçœ‹åˆ° `Order list: []`ï¼Œè¯´æ˜åç«¯è¿”å›ç©ºæ•°æ®
3. æ£€æŸ¥æ•°æ®åº“æ˜¯å¦æœ‰æ•°æ®

#### é—®é¢˜ 3: æ•°æ®æ ¼å¼é”™è¯¯

**å¯èƒ½åŸå› **:
- åç«¯è¿”å›çš„å­—æ®µåä¸å‰ç«¯æœŸæœ›ä¸ä¸€è‡´

**è§£å†³æ–¹æ¡ˆ**:
1. æŸ¥çœ‹ Console æ—¥å¿—ä¸­çš„ `API Response`
2. æ ¹æ®å®é™…è¿”å›çš„å­—æ®µåè°ƒæ•´ä»£ç 

### ä¸‹ä¸€æ­¥

å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·æä¾›ï¼š
1. æµè§ˆå™¨ Console çš„å®Œæ•´æ—¥å¿—
2. åç«¯æ§åˆ¶å°çš„å®Œæ•´æ—¥å¿—
3. å…·ä½“çš„é”™è¯¯ä¿¡æ¯

---

**ä¿®å¤æ—¶é—´**: 2024-11-13  
**ç‰ˆæœ¬**: v2.1.1
